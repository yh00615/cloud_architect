---
title: "Amazon VPC Endpoint ìƒì„± ë° ì—°ê²° í™•ì¸"
week: 3
session: 1
awsServices:
  - Amazon VPC
learningObjectives:
  - Amazon VPC í•µì‹¬ êµ¬ì„± ìš”ì†Œì™€ ì—­í• ì„ ì„¤ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
  - CIDR ë¸”ë¡ ì„¤ê³„ ì›ì¹™ì„ ì´í•´í•˜ê³  ì„œë¸Œë„· êµ¬ì„±ì— ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
  - Amazon VPC Endpointsì˜ ìœ í˜•ì„ ì´í•´í•˜ê³  ì ì ˆí•œ í”„ë¼ì´ë¹— ì—°ê²°ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
  - ë‹¤ì¸µ ë°©ì–´ ì „ëµì˜ ê°œë…ê³¼ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ ê³„ì¸µ êµ¬ì„±ì„ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
  - ë³´ì•ˆ ê·¸ë£¹ê³¼ NACLì˜ ì°¨ì´ë¥¼ ì´í•´í•˜ê³  í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
  - ë©€í‹° VPC ì„¤ê³„ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë¹„êµí•˜ê³  VPC Peeringìœ¼ë¡œ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
  - AWS Transit Gatewayë¡œ í—ˆë¸Œ-ìŠ¤í¬í¬ ë„¤íŠ¸ì›Œí¬ë¥¼ ì„¤ê³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
prerequisites:
  - Amazon VPC ê¸°ë³¸ ê°œë… ì´í•´
  - ë„¤íŠ¸ì›Œí‚¹ ê¸°ë³¸ ê°œë… (IP ì£¼ì†Œ, ì„œë¸Œë„·, ë¼ìš°íŒ…)
---

ì´ ì‹¤ìŠµì—ì„œëŠ” Amazon VPC Endpointì˜ ë‘ ê°€ì§€ íƒ€ì…ì¸ Interface Endpointì™€ Gateway Endpointë¥¼ ì§ì ‘ ìƒì„±í•˜ê³  ë™ì‘ ì›ë¦¬ë¥¼ í•™ìŠµí•©ë‹ˆë‹¤.

ë¨¼ì € AWS Systems Managerìš© Interface Endpoint 3ê°œ(ssm, ssmmessages, ec2messages)ë¥¼ ìƒì„±í•˜ì—¬ í”„ë¼ì´ë¹— ì„œë¸Œë„·ì—ì„œ Session Managerë¡œ Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•©ë‹ˆë‹¤. ê·¸ ë‹¤ìŒ Amazon S3 Gateway Endpointë¥¼ ìƒì„±í•˜ì—¬ ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ë¥¼ ê±°ì¹˜ì§€ ì•Šê³  S3ì— ì•ˆì „í•˜ê²Œ ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì„ í™•ì¸í•©ë‹ˆë‹¤.

Amazon VPC EndpointëŠ” VPCì™€ AWS ì„œë¹„ìŠ¤ ê°„ì˜ í”„ë¼ì´ë¹— ì—°ê²°ì„ ì œê³µí•˜ì—¬ ì¸í„°ë„·ì„ í†µí•˜ì§€ ì•Šê³ ë„ AWS ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. Interface Endpoint(ENI ê¸°ë°˜)ì™€ Gateway Endpoint(ë¼ìš°íŒ… í…Œì´ë¸” ê¸°ë°˜)ì˜ ì°¨ì´ë¥¼ AWS ì½˜ì†”ì—ì„œ ì§ì ‘ í™•ì¸í•˜ê³ , ê°ê°ì˜ ë™ì‘ ë°©ì‹ì„ ì‹¤ì œë¡œ ê²€ì¦í•©ë‹ˆë‹¤.

> [!DOWNLOAD]
> [week3-1-vpc-lab.zip](/files/week3/week3-1-vpc-lab.zip)
> - `week3-1-vpc-lab.yaml` - Amazon VPC í™˜ê²½ AWS CloudFormation í…œí”Œë¦¿ (íƒœìŠ¤í¬ 0ì—ì„œ Amazon VPC, ì„œë¸Œë„·, NAT Gateway, Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ ìë™ ìƒì„±)
> - `README.md` - ì•„í‚¤í…ì²˜ ì„¤ëª… ë° Amazon VPC Endpoint ì„¤ì • ê°€ì´ë“œ
> 
> **ê´€ë ¨ íƒœìŠ¤í¬:**
> 
> - íƒœìŠ¤í¬ 0: ì‹¤ìŠµ í™˜ê²½ êµ¬ì¶• (AWS CloudFormation í…œí”Œë¦¿ ë°°í¬ - Amazon VPC Endpoint ì œì™¸)

> [!WARNING]
> ì´ ì‹¤ìŠµì—ì„œ ìƒì„±í•˜ëŠ” ë¦¬ì†ŒìŠ¤ëŠ” ì‹¤ìŠµ ì¢…ë£Œ í›„ ë°˜ë“œì‹œ ì‚­ì œí•´ì•¼ í•©ë‹ˆë‹¤.
> 
> **ì˜ˆìƒ ë¹„ìš©** (ap-northeast-2 ë¦¬ì „ ê¸°ì¤€):
> 
> | ë¦¬ì†ŒìŠ¤ | íƒ€ì… | ì‹œê°„ë‹¹ ë¹„ìš© |
> |--------|------|------------|
> | NAT Gateway | - | ì•½ $0.045 |
> | Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ | t3.micro | ì•½ $0.0116 |
> | Interface Endpoint | SSM (3ê°œ Ã— 1 AZ) | ì•½ $0.03 |
> | **ì´ ì˜ˆìƒ** | - | **ì•½ $0.087** |

## íƒœìŠ¤í¬ 0: ì‹¤ìŠµ í™˜ê²½ êµ¬ì¶•

ì´ íƒœìŠ¤í¬ì—ì„œëŠ” CloudFormationì„ ì‚¬ìš©í•˜ì—¬ ì‹¤ìŠµì— í•„ìš”í•œ ê¸°ë³¸ ì¸í”„ë¼ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.

> [!NOTE]
> CloudFormation ìŠ¤íƒì€ Amazon VPC, ì„œë¸Œë„·, NAT Gateway, Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Amazon VPC Endpoint(Interface Endpoint, Gateway Endpoint)ëŠ” íƒœìŠ¤í¬ 1-2ì—ì„œ ì§ì ‘ ìƒì„±í•©ë‹ˆë‹¤.

### ìƒì„¸ ë‹¨ê³„

1. ë‹¤ìš´ë¡œë“œí•œ `week3-1-vpc-lab.zip` íŒŒì¼ì˜ ì••ì¶•ì„ í•´ì œí•©ë‹ˆë‹¤.
2. `week3-1-vpc-lab.yaml` íŒŒì¼ì„ í™•ì¸í•©ë‹ˆë‹¤.
3. AWS Management Consoleì— ë¡œê·¸ì¸í•œ í›„ ìƒë‹¨ ê²€ìƒ‰ì°½ì—ì„œ `AWS CloudFormation`ì„ ê²€ìƒ‰í•˜ê³  ì„ íƒí•©ë‹ˆë‹¤.
4. [[Create stack]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
5. **Prerequisite - Prepare template**ì—ì„œ `Template is ready`ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
6. **Specify template**ì—ì„œ `Upload a template file`ì„ ì„ íƒí•©ë‹ˆë‹¤.
7. [[Choose file]] ë²„íŠ¼ì„ í´ë¦­í•œ í›„ `week3-1-vpc-lab.yaml` íŒŒì¼ì„ ì„ íƒí•©ë‹ˆë‹¤.
8. [[Next]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
9. **Stack name**ì— `week3-1-vpc-stack`ì„ ì…ë ¥í•©ë‹ˆë‹¤.
10. **Parameters** ì„¹ì…˜ì—ì„œ í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ í™•ì¸í•©ë‹ˆë‹¤ (ëŒ€ë¶€ë¶„ ê¸°ë³¸ê°’ ì‚¬ìš©).
11. [[Next]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
12. **Configure stack options** í˜ì´ì§€ê°€ ì—´ë¦½ë‹ˆë‹¤.
13. í˜ì´ì§€ë¥¼ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ **Tags** ì„¹ì…˜ì„ ì°¾ìŠµë‹ˆë‹¤.
14. [[Add new tag]] ë²„íŠ¼ì„ í´ë¦­í•œ í›„ ë‹¤ìŒ íƒœê·¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤:

| Key | Value |
|-----|-------|
| `Project` | `AWS-Lab` |
| `Week` | `3-1` |
| `CreatedBy` | `Student` |

15. í˜ì´ì§€ í•˜ë‹¨ì˜ [[Next]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.

> [!NOTE]
> **Review and create** í˜ì´ì§€ê°€ ì—´ë¦½ë‹ˆë‹¤. ì´ í˜ì´ì§€ì—ì„œëŠ” ìŠ¤íƒ ìƒì„± ì „ ëª¨ë“  ì„¤ì •ì„ ìµœì¢… í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

16. í˜ì´ì§€ë¥¼ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.
17. **Stack details** ì„¹ì…˜ì—ì„œ ë‹¤ìŒ ì •ë³´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤:
    - **Stack name** í•„ë“œì— `week3-1-vpc-stack`ì´ í‘œì‹œë©ë‹ˆë‹¤
    - **Template** í•„ë“œì— ì—…ë¡œë“œí•œ YAML íŒŒì¼ëª…ì´ í‘œì‹œë©ë‹ˆë‹¤
18. **Parameters** ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.

> [!NOTE]
> **Parameters** ì„¹ì…˜ì—ëŠ” ì´ì „ ë‹¨ê³„ì—ì„œ ì„¤ì •í•œ íŒŒë¼ë¯¸í„° ê°’ë“¤ì´ í‘œì‹œë©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ ê¸°ë³¸ê°’ì„ ì‚¬ìš©í–ˆë‹¤ë©´ ê¸°ë³¸ê°’ì´ í‘œì‹œë©ë‹ˆë‹¤. ì˜ëª»ëœ ì„¤ì •ì´ ìˆìœ¼ë©´ [[Previous]] ë²„íŠ¼ìœ¼ë¡œ ëŒì•„ê°€ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

19. í˜ì´ì§€ í•˜ë‹¨ì˜ **Capabilities** ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.
20. `I acknowledge that AWS CloudFormation might create AWS IAM resources` ì²´í¬ë°•ìŠ¤ë¥¼ ì°¾ìŠµë‹ˆë‹¤.
21. ì²´í¬ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ì—¬ ì„ íƒí•©ë‹ˆë‹¤.

> [!NOTE]
> ì´ ì²´í¬ë°•ìŠ¤ëŠ” CloudFormationì´ AWS IAM ì—­í• ì„ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì²´í¬í•˜ì§€ ì•Šìœ¼ë©´ ìŠ¤íƒ ìƒì„±ì´ ì‹¤íŒ¨í•©ë‹ˆë‹¤.

22. [[Submit]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.

> [!NOTE]
> AWS CloudFormation ìŠ¤íƒ ëª©ë¡ í˜ì´ì§€ë¡œ ìë™ ì´ë™í•©ë‹ˆë‹¤. í˜ì´ì§€ ì¤‘ì•™ì— ìŠ¤íƒ ëª©ë¡ í…Œì´ë¸”ì´ í‘œì‹œë©ë‹ˆë‹¤.

23. í…Œì´ë¸”ì—ì„œ `week3-1-vpc-stack` ìŠ¤íƒì„ ì°¾ìŠµë‹ˆë‹¤.
24. ìŠ¤íƒ í–‰ì˜ **Status** ì—´ì„ í™•ì¸í•©ë‹ˆë‹¤.

> [!NOTE]
> **Status** ì—´ì€ ìŠ¤íƒì˜ í˜„ì¬ ìƒíƒœë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ìŠ¤íƒ ìƒì„±ì´ ì‹œì‘ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìƒíƒœ ë³€í™”ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤:
> - **CREATE_IN_PROGRESS** (ì£¼í™©ìƒ‰): CloudFormationì´ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤
> - **CREATE_COMPLETE** (ì´ˆë¡ìƒ‰): ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤
> - **CREATE_FAILED** (ë¹¨ê°„ìƒ‰): ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤ (Events íƒ­ì—ì„œ ì›ì¸ í™•ì¸ í•„ìš”)

25. `week3-1-vpc-stack` ìŠ¤íƒì„ í´ë¦­í•˜ì—¬ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
26. **Events** íƒ­ì„ ì„ íƒí•©ë‹ˆë‹¤.

> [!NOTE]
> **Events** íƒ­ì—ëŠ” ë¦¬ì†ŒìŠ¤ ìƒì„± ê³¼ì •ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤. ê° ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœê°€ "CREATE_IN_PROGRESS" â†’ "CREATE_COMPLETE" ìˆœì„œë¡œ ë³€ê²½ë©ë‹ˆë‹¤. Amazon VPC, ì„œë¸Œë„·, NAT Gateway, Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ ë“±ì´ ìˆœì°¨ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤. ìŠ¤íƒ ìƒì„±ì— 5-7ë¶„ì´ ì†Œìš”ë©ë‹ˆë‹¤. ëŒ€ê¸°í•˜ëŠ” ë™ì•ˆ ì´ì „ ì°¨ì‹œ ë‚´ìš©ì„ ë³µìŠµí•˜ê±°ë‚˜ ë‹¤ìŒ íƒœìŠ¤í¬ë¥¼ ë¯¸ë¦¬ ì½ì–´ë³´ì„¸ìš”.

27. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ìµœì‹  ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
28. í˜ì´ì§€ ìƒë‹¨ì˜ **Status** í•„ë“œë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
29. **Status**ê°€ "CREATE_COMPLETE"ë¡œ ë³€ê²½ë  ë•Œê¹Œì§€ 27-28ë‹¨ê³„ë¥¼ ë°˜ë³µí•©ë‹ˆë‹¤.

> [!NOTE]
> í˜ì´ì§€ ìƒë‹¨ì˜ **Status** í•„ë“œëŠ” ì „ì²´ ìŠ¤íƒì˜ ìƒíƒœë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. "CREATE_IN_PROGRESS"ì—ì„œ "CREATE_COMPLETE"ë¡œ ë³€ê²½ë˜ë©´ ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ëœ ê²ƒì…ë‹ˆë‹¤. ë§Œì•½ "CREATE_FAILED"ê°€ í‘œì‹œë˜ë©´ **Events** íƒ­ì—ì„œ ì˜¤ë¥˜ ì›ì¸ì„ í™•ì¸í•©ë‹ˆë‹¤.

30. **Outputs** íƒ­ì„ ì„ íƒí•©ë‹ˆë‹¤.
31. ë‹¤ìŒ 5ê°œì˜ ì¶œë ¥ê°’ì„ ë³µì‚¬í•˜ì—¬ ë©”ëª¨ì¥ì— ì €ì¥í•©ë‹ˆë‹¤:
    - `VpcId`: Amazon VPC ID (ì˜ˆ: vpc-0123456789abcdef0) - íƒœìŠ¤í¬ 1-2ì—ì„œ ì‚¬ìš©
    - `PrivateSubnetAId`: í”„ë¼ì´ë¹— ì„œë¸Œë„· A ID (ì˜ˆ: subnet-0123456789abcdef0) - íƒœìŠ¤í¬ 1ì—ì„œ ì‚¬ìš©
    - `PrivateRouteTableAId`: í”„ë¼ì´ë¹— ë¼ìš°íŒ… í…Œì´ë¸” A ID (ì˜ˆ: rtb-0123456789abcdef0) - íƒœìŠ¤í¬ 2ì—ì„œ ì‚¬ìš©
    - `NatGatewayId`: NAT Gateway ID (ì˜ˆ: nat-0123456789abcdef0) - íƒœìŠ¤í¬ 5.3ì—ì„œ ì‚¬ìš©
    - `EC2InstanceId`: í…ŒìŠ¤íŠ¸ìš© Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ ID (ì˜ˆ: i-0123456789abcdef0) - íƒœìŠ¤í¬ 5ì—ì„œ ì‚¬ìš©

> [!IMPORTANT]
> ì´ 5ê°œ ê°’ì€ ë‹¤ìŒ íƒœìŠ¤í¬ì—ì„œ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤. ë©”ëª¨ì¥ì— ì €ì¥í•©ë‹ˆë‹¤.

âœ… **íƒœìŠ¤í¬ ì™„ë£Œ**: ì‹¤ìŠµ í™˜ê²½ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.

## íƒœìŠ¤í¬ 1: AWS Systems Manager Interface Endpoint ìƒì„±

ì´ íƒœìŠ¤í¬ì—ì„œëŠ” AWS Systems Managerìš© Interface Endpointë¥¼ ìƒì„±í•˜ì—¬ í”„ë¼ì´ë¹— ì„œë¸Œë„·ì—ì„œ Session Managerë¡œ Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.

> [!NOTE]
> Interface EndpointëŠ” ENI(Elastic Network Interface) ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©°, ì‹œê°„ë‹¹ ìš”ê¸ˆì´ ë¶€ê³¼ë©ë‹ˆë‹¤. Session Managerë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ 3ê°œì˜ Interface Endpoint(ssm, ssmmessages, ec2messages)ê°€ í•„ìš”í•©ë‹ˆë‹¤.

### íƒœìŠ¤í¬ 1.1: SSM Interface Endpoint ìƒì„±

1. AWS Management Consoleì— ë¡œê·¸ì¸í•œ í›„ ìƒë‹¨ ê²€ìƒ‰ì°½ì—ì„œ `Amazon VPC`ë¥¼ ê²€ìƒ‰í•˜ê³  ì„ íƒí•©ë‹ˆë‹¤.
2. ì™¼ìª½ ë©”ë‰´ì—ì„œ **Endpoints**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
3. [[Create endpoint]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
4. **Name tag**ì— `week3-1-ssm-endpoint`ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
5. **Service category**ì—ì„œ `AWS services`ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
6. **Services** ê²€ìƒ‰ì°½ì— `ssm`ì„ ì…ë ¥í•©ë‹ˆë‹¤.
7. ê²€ìƒ‰ ê²°ê³¼ì—ì„œ **Service Name**ì´ `com.amazonaws.ap-northeast-2.ssm`ì´ê³  **Type**ì´ `Interface`ì¸ í•­ëª©ì„ ì„ íƒí•©ë‹ˆë‹¤.

> [!NOTE]
> SSM Interface EndpointëŠ” AWS Systems Manager ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤. Session Managerë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì´ ì—”ë“œí¬ì¸íŠ¸ê°€ í•„ìˆ˜ì…ë‹ˆë‹¤.

8. **Amazon VPC**ì—ì„œ ë©”ëª¨ì¥ì— ì €ì¥í•œ VpcIdë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
9. **Subnets** ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.
10. **Availability Zone**ì—ì„œ `ap-northeast-2a`ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
11. **Subnet ID**ì—ì„œ ë©”ëª¨ì¥ì— ì €ì¥í•œ `PrivateSubnetAId`ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

> [!NOTE]
> Interface EndpointëŠ” ì„ íƒí•œ ì„œë¸Œë„·ì— ENI(Elastic Network Interface)ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. í”„ë¼ì´ë¹— ì„œë¸Œë„·ì— ìƒì„±í•˜ì—¬ ì¸í„°ë„·ì„ ê±°ì¹˜ì§€ ì•Šê³  AWS ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•©ë‹ˆë‹¤.

12. **Security groups** ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.
13. ê¸°ë³¸ ë³´ì•ˆ ê·¸ë£¹ì„ ì œê±°í•©ë‹ˆë‹¤.
14. ë³´ì•ˆ ê·¸ë£¹ ê²€ìƒ‰ì°½ì— `week3-1`ì„ ì…ë ¥í•©ë‹ˆë‹¤.
15. `week3-1-endpoint-sg`ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

> [!NOTE]
> CloudFormationì´ ìƒì„±í•œ ë³´ì•ˆ ê·¸ë£¹ì€ HTTPS(443 í¬íŠ¸) ì¸ë°”ìš´ë“œ íŠ¸ë˜í”½ì„ í—ˆìš©í•©ë‹ˆë‹¤. Interface EndpointëŠ” HTTPSë¥¼ í†µí•´ í†µì‹ í•©ë‹ˆë‹¤.

16. **Policy** ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.
17. **Full access**ë¥¼ ì„ íƒí•œ ìƒíƒœë¡œ ìœ ì§€í•©ë‹ˆë‹¤.
18. **Tags - optional** ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.
19. [[Add new tag]] ë²„íŠ¼ì„ í´ë¦­í•œ í›„ ë‹¤ìŒ íƒœê·¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤:

| Key | Value |
|-----|-------|
| `Project` | `AWS-Lab` |
| `Week` | `3-1` |
| `CreatedBy` | `Student` |

20. [[Create endpoint]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
21. Endpoint ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
22. ìƒì„±í•œ `week3-1-ssm-endpoint`ì˜ **Status**ê°€ "Available"ë¡œ ë³€ê²½ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.

> [!NOTE]
> Interface Endpoint ìƒì„±ì€ ì¼ë°˜ì ìœ¼ë¡œ 2-3ë¶„ì´ ì†Œìš”ë©ë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

âœ… **íƒœìŠ¤í¬ 1.1 ì™„ë£Œ**: SSM Interface Endpointê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

### íƒœìŠ¤í¬ 1.2: SSM Messages Interface Endpoint ìƒì„±

íƒœìŠ¤í¬ 1.1ê³¼ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ë‘ ë²ˆì§¸ Interface Endpointë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**ë‹¬ë¼ì§€ëŠ” ë¶€ë¶„ë§Œ í™•ì¸í•˜ì„¸ìš”:**
- **Name tag**: `week3-1-ssmmessages-endpoint`
- **Services** ê²€ìƒ‰: `ssmmessages`
- **Service Name**: `com.amazonaws.ap-northeast-2.ssmmessages` (Type: Interface)

> [!NOTE]
> SSM Messages Interface EndpointëŠ” Session Managerì˜ ë©”ì‹œì§€ ì „ì†¡ì„ ìœ„í•œ ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤.

ë‚˜ë¨¸ì§€ ì„¤ì •(VPC, ì„œë¸Œë„·, ë³´ì•ˆ ê·¸ë£¹, íƒœê·¸)ì€ íƒœìŠ¤í¬ 1.1ê³¼ ë™ì¼í•©ë‹ˆë‹¤.

âœ… **íƒœìŠ¤í¬ 1.2 ì™„ë£Œ**: SSM Messages Interface Endpointê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

### íƒœìŠ¤í¬ 1.3: EC2 Messages Interface Endpoint ìƒì„±

íƒœìŠ¤í¬ 1.1ê³¼ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ì„¸ ë²ˆì§¸ Interface Endpointë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**ë‹¬ë¼ì§€ëŠ” ë¶€ë¶„ë§Œ í™•ì¸í•˜ì„¸ìš”:**
- **Name tag**: `week3-1-ec2messages-endpoint`
- **Services** ê²€ìƒ‰: `ec2messages`
- **Service Name**: `com.amazonaws.ap-northeast-2.ec2messages` (Type: Interface)

> [!NOTE]
> EC2 Messages Interface EndpointëŠ” Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ì™€ Systems Manager ê°„ì˜ í†µì‹ ì„ ìœ„í•œ ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤. 3ê°œì˜ Interface Endpointê°€ ëª¨ë‘ "Available" ìƒíƒœê°€ ë˜ë©´ Session Managerë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‚˜ë¨¸ì§€ ì„¤ì •(VPC, ì„œë¸Œë„·, ë³´ì•ˆ ê·¸ë£¹, íƒœê·¸)ì€ íƒœìŠ¤í¬ 1.1ê³¼ ë™ì¼í•©ë‹ˆë‹¤.

âœ… **íƒœìŠ¤í¬ 1.3 ì™„ë£Œ**: EC2 Messages Interface Endpointê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

âœ… **íƒœìŠ¤í¬ 1 ì™„ë£Œ**: AWS Systems Managerìš© Interface Endpoint 3ê°œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

## íƒœìŠ¤í¬ 2: Amazon S3 Gateway Endpoint ìƒì„±

ì´ íƒœìŠ¤í¬ì—ì„œëŠ” Amazon S3 Gateway Endpointë¥¼ ìƒì„±í•˜ì—¬ í”„ë¼ì´ë¹— ì„œë¸Œë„·ì—ì„œ S3ì— ì•ˆì „í•˜ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.

> [!NOTE]
> Gateway EndpointëŠ” ë¬´ë£Œì´ë©°, ë¼ìš°íŒ… í…Œì´ë¸”ì„ í†µí•´ íŠ¸ë˜í”½ì„ ë¼ìš°íŒ…í•©ë‹ˆë‹¤. Interface Endpointì™€ ë‹¬ë¦¬ ì‹œê°„ë‹¹ ìš”ê¸ˆì´ ë¶€ê³¼ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

1. AWS Management Consoleì— ë¡œê·¸ì¸í•œ í›„ ìƒë‹¨ ê²€ìƒ‰ì°½ì—ì„œ `Amazon VPC`ë¥¼ ê²€ìƒ‰í•˜ê³  ì„ íƒí•©ë‹ˆë‹¤.
2. ì™¼ìª½ ë©”ë‰´ì—ì„œ **Endpoints**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
3. [[Create endpoint]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
4. **Name tag**ì— `week3-1-s3-endpoint`ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
5. **Service category**ì—ì„œ `AWS services`ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
6. **Services** ê²€ìƒ‰ì°½ì— `s3`ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
7. ê²€ìƒ‰ ê²°ê³¼ì—ì„œ **Service Name**ì´ `com.amazonaws.ap-northeast-2.s3`ì´ê³  **Type**ì´ `Gateway`ì¸ í•­ëª©ì„ ì„ íƒí•©ë‹ˆë‹¤.

> [!NOTE]
> S3ëŠ” Gateway Endpointì™€ Interface Endpointë¥¼ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤. Gateway EndpointëŠ” ë¬´ë£Œì´ë¯€ë¡œ ë¹„ìš© íš¨ìœ¨ì ì…ë‹ˆë‹¤.

8. **Amazon VPC**ì—ì„œ ë©”ëª¨ì¥ì— ì €ì¥í•œ VpcIdë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

> [!NOTE]
> Amazon VPC ë“œë¡­ë‹¤ìš´ì—ì„œ Amazon VPC IDë¡œ ê²€ìƒ‰í•˜ë©´ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

9. **Route tables** ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.
10. ë©”ëª¨ì¥ì— ì €ì¥í•œ `PrivateRouteTableAId`ì— í•´ë‹¹í•˜ëŠ” ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì²´í¬í•©ë‹ˆë‹¤.

> [!NOTE]
> ë¼ìš°íŒ… í…Œì´ë¸” ì´ë¦„ì— "Private"ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. Gateway EndpointëŠ” ì„ íƒí•œ ë¼ìš°íŒ… í…Œì´ë¸”ì— ìë™ìœ¼ë¡œ ë¼ìš°íŒ… ê·œì¹™ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

11. **Policy** ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.
12. **Full access**ë¥¼ ì„ íƒí•œ ìƒíƒœë¡œ ìœ ì§€í•©ë‹ˆë‹¤.

> [!NOTE]
> Full access ì •ì±…ì€ ëª¨ë“  Amazon S3 ì‘ì—…ì„ í—ˆìš©í•©ë‹ˆë‹¤. í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” íŠ¹ì • ë²„í‚·ë§Œ ì ‘ê·¼í•˜ë„ë¡ ì œí•œí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

13. **Tags - optional** ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.
14. [[Add new tag]] ë²„íŠ¼ì„ í´ë¦­í•œ í›„ ë‹¤ìŒ íƒœê·¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤:

| Key | Value |
|-----|-------|
| `Project` | `AWS-Lab` |
| `Week` | `3-1` |
| `CreatedBy` | `Student` |

15. [[Create endpoint]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
16. Endpoint ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
17. ìƒì„±í•œ `week3-1-s3-endpoint`ì˜ **Status**ê°€ "Available"ë¡œ ë³€ê²½ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.

> [!NOTE]
> Gateway Endpoint ìƒì„±ì€ ì¼ë°˜ì ìœ¼ë¡œ 1-2ë¶„ ë‚´ì— ì™„ë£Œë©ë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

âœ… **íƒœìŠ¤í¬ 2 ì™„ë£Œ**: Amazon S3 Gateway Endpointê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

## íƒœìŠ¤í¬ 3: Interface Endpointì™€ Gateway Endpoint ë¹„êµ

ì´ íƒœìŠ¤í¬ì—ì„œëŠ” AWS ì½˜ì†”ì—ì„œ Interface Endpointì™€ Gateway Endpointì˜ ì°¨ì´ì ì„ ì§ì ‘ í™•ì¸í•©ë‹ˆë‹¤.

1. Amazon VPC ì½˜ì†”ì—ì„œ ì™¼ìª½ ë©”ë‰´ì—ì„œ **Endpoints**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
2. Endpoint ëª©ë¡ì—ì„œ `week3-1-ssm-endpoint` (Interface Endpoint)ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.
3. **Details** íƒ­ì—ì„œ ë‹¤ìŒ ì •ë³´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤:
   - **Type**: Interface
   - **Subnets**: ì„ íƒí•œ ì„œë¸Œë„· í‘œì‹œ
   - **Network interfaces**: ENI ID í‘œì‹œ (eni-ë¡œ ì‹œì‘)
   - **DNS names**: í”„ë¼ì´ë¹— DNS ì´ë¦„ í‘œì‹œ

> [!NOTE]
> Interface EndpointëŠ” ENI(Elastic Network Interface)ë¥¼ ìƒì„±í•˜ì—¬ í”„ë¼ì´ë¹— IP ì£¼ì†Œë¥¼ í• ë‹¹ë°›ìŠµë‹ˆë‹¤. ì´ IP ì£¼ì†Œë¥¼ í†µí•´ AWS ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•©ë‹ˆë‹¤.

4. ì™¼ìª½ ë©”ë‰´ì—ì„œ **Endpoints**ë¥¼ ì„ íƒí•˜ì—¬ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.
5. `week3-1-s3-endpoint` (Gateway Endpoint)ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.
6. **Details** íƒ­ì—ì„œ ë‹¤ìŒ ì •ë³´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤:
   - **Type**: Gateway
   - **Route tables**: ì—°ê²°ëœ ë¼ìš°íŒ… í…Œì´ë¸” í‘œì‹œ
   - **Network interfaces**: í‘œì‹œ ì•ˆ ë¨ (ENI ì‚¬ìš© ì•ˆ í•¨)
   - **DNS names**: í‘œì‹œ ì•ˆ ë¨

> [!NOTE]
> Gateway EndpointëŠ” ENIë¥¼ ìƒì„±í•˜ì§€ ì•Šê³  ë¼ìš°íŒ… í…Œì´ë¸”ì— ê²½ë¡œë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤. ë”°ë¼ì„œ Network interfacesì™€ DNS names ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.

7. ë‘ Endpointì˜ **Details** íƒ­ì„ ë¹„êµí•˜ì—¬ ë‹¤ìŒ ì°¨ì´ì ì„ í™•ì¸í•©ë‹ˆë‹¤:

| í•­ëª© | Interface Endpoint | Gateway Endpoint |
|------|-------------------|------------------|
| **Type** | Interface | Gateway |
| **Network interfaces** | âœ… ENI ìƒì„± (eni-xxx) | âŒ ENI ì—†ìŒ |
| **DNS names** | âœ… í”„ë¼ì´ë¹— DNS ì œê³µ | âŒ DNS ì—†ìŒ |
| **Subnets** | âœ… ì„œë¸Œë„· ì„ íƒ í•„ìš” | âŒ ì„œë¸Œë„· ì„ íƒ ë¶ˆí•„ìš” |
| **Route tables** | âŒ ë¼ìš°íŒ… í…Œì´ë¸” ë¶ˆí•„ìš” | âœ… ë¼ìš°íŒ… í…Œì´ë¸” ì—°ê²° |
| **Security groups** | âœ… ë³´ì•ˆ ê·¸ë£¹ ì ìš© ê°€ëŠ¥ | âŒ ë³´ì•ˆ ê·¸ë£¹ ë¶ˆê°€ |

> [!NOTE]
> **Interface Endpoint**ëŠ” ENI ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ì—¬ í”„ë¼ì´ë¹— IP ì£¼ì†Œì™€ DNS ì´ë¦„ì„ ì œê³µí•©ë‹ˆë‹¤. ë³´ì•ˆ ê·¸ë£¹ìœ¼ë¡œ íŠ¸ë˜í”½ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> 
> **Gateway Endpoint**ëŠ” ë¼ìš°íŒ… í…Œì´ë¸” ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ì—¬ Prefix Listë¥¼ í†µí•´ íŠ¸ë˜í”½ì„ ë¼ìš°íŒ…í•©ë‹ˆë‹¤. ë³´ì•ˆ ê·¸ë£¹ ëŒ€ì‹  Endpoint ì •ì±…ìœ¼ë¡œ ì ‘ê·¼ì„ ì œì–´í•©ë‹ˆë‹¤.

âœ… **íƒœìŠ¤í¬ 3 ì™„ë£Œ**: Interface Endpointì™€ Gateway Endpointì˜ ì°¨ì´ì ì„ AWS ì½˜ì†”ì—ì„œ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

## íƒœìŠ¤í¬ 4: ë¼ìš°íŒ… í…Œì´ë¸” í™•ì¸

ì´ íƒœìŠ¤í¬ì—ì„œëŠ” Amazon VPC Endpointê°€ ë¼ìš°íŒ… í…Œì´ë¸”ì— ìë™ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

1. Amazon VPC ì½˜ì†”ì—ì„œ ì™¼ìª½ ë©”ë‰´ì—ì„œ **Route tables**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
2. ê²€ìƒ‰ì°½ì— ë©”ëª¨ì¥ì— ì €ì¥í•œ `PrivateRouteTableAId`ë¥¼ ì…ë ¥í•˜ì—¬ í”„ë¼ì´ë¹— ì„œë¸Œë„· ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì°¾ìŠµë‹ˆë‹¤.
3. í•´ë‹¹ ë¼ìš°íŒ… í…Œì´ë¸”ì„ í´ë¦­í•©ë‹ˆë‹¤.
4. í•˜ë‹¨ì˜ **Routes** íƒ­ì„ ì„ íƒí•©ë‹ˆë‹¤.
5. ë¼ìš°íŒ… ê·œì¹™ ëª©ë¡ì—ì„œ Amazon S3 Gateway Endpointê°€ ìë™ìœ¼ë¡œ ì¶”ê°€í•œ ê·œì¹™ì„ ì°¾ìŠµë‹ˆë‹¤.
6. **Destination** ì—´ì—ì„œ `pl-`ë¡œ ì‹œì‘í•˜ëŠ” í•­ëª©ì„ ì°¾ìŠµë‹ˆë‹¤.
7. í•´ë‹¹ í•­ëª©ì˜ **Target** ì—´ì—ì„œ `vpce-`ë¡œ ì‹œì‘í•˜ëŠ” í•­ëª©ì„ í™•ì¸í•©ë‹ˆë‹¤.

> [!NOTE]
> Gateway EndpointëŠ” ë¼ìš°íŒ… í…Œì´ë¸”ì— ìë™ìœ¼ë¡œ ë¼ìš°íŒ… ê·œì¹™ì„ ì¶”ê°€í•©ë‹ˆë‹¤. **Destination**ì˜ Prefix List (pl-ë¡œ ì‹œì‘)ëŠ” Amazon S3 ì„œë¹„ìŠ¤ì˜ IP ì£¼ì†Œ ë²”ìœ„ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ Prefix Listë¡œ í–¥í•˜ëŠ” íŠ¸ë˜í”½ì€ Amazon VPC Endpointë¥¼ í†µí•´ ë¼ìš°íŒ…ë©ë‹ˆë‹¤.

8. ë‹¤ë¥¸ ë¼ìš°íŒ… ê·œì¹™ë“¤ë„ í™•ì¸í•©ë‹ˆë‹¤.
9. **Destination**ì´ `10.0.0.0/16`ì¸ í•­ëª©ì˜ **Target**ì´ `local`ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.
10. **Destination**ì´ `0.0.0.0/0`ì¸ í•­ëª©ì˜ **Target**ì´ NAT Gateway(`nat-`ë¡œ ì‹œì‘)ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.

> [!NOTE]
> ë¼ìš°íŒ… ê·œì¹™ì˜ ì˜ë¯¸:
> - `10.0.0.0/16` â†’ `local`: Amazon VPC ë‚´ë¶€ íŠ¸ë˜í”½ì€ ë¡œì»¬ë¡œ ë¼ìš°íŒ…
> - `0.0.0.0/0` â†’ `nat-xxxxx`: ì¸í„°ë„· íŠ¸ë˜í”½ì€ NAT Gatewayë¥¼ í†µí•´ ë¼ìš°íŒ…
> - `pl-xxxxxxxx` â†’ `vpce-xxxxx`: Amazon S3 íŠ¸ë˜í”½ì€ Amazon VPC Endpointë¥¼ í†µí•´ ë¼ìš°íŒ…

âœ… **íƒœìŠ¤í¬ 4 ì™„ë£Œ**: ë¼ìš°íŒ… í…Œì´ë¸”ì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.

## íƒœìŠ¤í¬ 5: Amazon VPC Endpoint ë™ì‘ ê²€ì¦

ì´ íƒœìŠ¤í¬ì—ì„œëŠ” Amazon VPC Endpointë§Œìœ¼ë¡œ S3ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ ì‹¤ì œë¡œ ê²€ì¦í•©ë‹ˆë‹¤. NAT Gateway ê²½ë¡œë¥¼ ì¼ì‹œì ìœ¼ë¡œ ì œê±°í•˜ì—¬ Amazon VPC Endpointë¥¼ í†µí•œ Amazon S3 ì ‘ê·¼ì„ ì¦ëª…í•©ë‹ˆë‹¤.

### íƒœìŠ¤í¬ 5.1: í˜„ì¬ ìƒíƒœ í™•ì¸ (NAT Gateway + Amazon VPC Endpoint)

### íƒœìŠ¤í¬ 5.1: í˜„ì¬ ìƒíƒœ í™•ì¸ (NAT Gateway + Amazon VPC Endpoint)

ë¨¼ì € NAT Gatewayì™€ Amazon VPC Endpointê°€ ëª¨ë‘ ìˆëŠ” í˜„ì¬ ìƒíƒœì—ì„œ Amazon S3 ì ‘ê·¼ê³¼ ì¸í„°ë„· ì ‘ê·¼ì„ í™•ì¸í•©ë‹ˆë‹¤.

1. AWS Management Consoleì— ë¡œê·¸ì¸í•œ í›„ ìƒë‹¨ ê²€ìƒ‰ì°½ì—ì„œ `Amazon EC2`ë¥¼ ê²€ìƒ‰í•˜ê³  ì„ íƒí•©ë‹ˆë‹¤.
2. ì™¼ìª½ ë©”ë‰´ì—ì„œ **Instances**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
3. ë©”ëª¨ì¥ì— ì €ì¥í•œ EC2InstanceIdë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
4. ê²€ìƒ‰ì°½ì— EC2InstanceIdë¥¼ ì…ë ¥í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ìŠµë‹ˆë‹¤.
5. í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

> [!NOTE]
> ì¸ìŠ¤í„´ìŠ¤ ì´ë¦„ì— "week3-1"ì´ í¬í•¨ë˜ì–´ ìˆê³ , **Instance state**ê°€ "Running"ìœ¼ë¡œ í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

6. **Instance state**ê°€ "Running"ì´ê³  **Status check**ê°€ "2/2 checks passed"ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.

> [!NOTE]
> **Status check**ëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ ì‹œìŠ¤í…œ ìƒíƒœì™€ ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤. CloudFormation ìŠ¤íƒì´ "CREATE_COMPLETE"ë¡œ ì™„ë£Œë˜ì–´ë„ ì¸ìŠ¤í„´ìŠ¤ì˜ Status checkê°€ ì•„ì§ ì§„í–‰ ì¤‘ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. "2/2 checks passed"ê°€ í‘œì‹œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ 1-2ë¶„ì´ ì†Œìš”ë©ë‹ˆë‹¤.

7. [[Connect]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
8. **Session Manager** íƒ­ì„ ì„ íƒí•©ë‹ˆë‹¤.

> [!NOTE]
> Session Managerë¥¼ ì‚¬ìš©í•˜ë©´ SSH í‚¤ ì—†ì´ë„ Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì•ˆì „í•˜ê²Œ ì ‘ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. AWS IAM ì—­í• ì„ í†µí•´ ì¸ì¦ë˜ë©°, ëª¨ë“  ì„¸ì…˜ì´ CloudTrailì— ê¸°ë¡ë©ë‹ˆë‹¤.

9. [[Connect]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.

> [!NOTE]
> ìƒˆ ë¸Œë¼ìš°ì € íƒ­ì´ ì—´ë¦¬ê³  í„°ë¯¸ë„ í™”ë©´ì´ í‘œì‹œë©ë‹ˆë‹¤. í„°ë¯¸ë„ ì—°ê²°ì— 10-20ì´ˆê°€ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `bash-5.2$` ë˜ëŠ” `ssm-user@ip-10-0-x-x:~$` í˜•ì‹ì˜ í”„ë¡¬í”„íŠ¸ê°€ í‘œì‹œë˜ë©´ ì¤€ë¹„ëœ ê²ƒì…ë‹ˆë‹¤.

10. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ Amazon S3 ë²„í‚· ëª©ë¡ì„ í™•ì¸í•©ë‹ˆë‹¤:

```bash
aws s3 ls
```

11. Amazon S3 ë²„í‚· ëª©ë¡ì´ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

> [!OUTPUT]
> ```
> # ê³„ì •ì— S3 ë²„í‚·ì´ ìˆëŠ” ê²½ìš° ë²„í‚· ëª©ë¡ì´ í‘œì‹œë©ë‹ˆë‹¤
> 2026-xx-xx xx:xx:xx your-bucket-name-1
> 2026-xx-xx xx:xx:xx your-bucket-name-2
> 
> # ë²„í‚·ì´ ì—†ëŠ” ê²½ìš° ë¹ˆ ì¶œë ¥ì´ ë‚˜íƒ€ë‚˜ë©°, ì´ëŠ” ì •ìƒì…ë‹ˆë‹¤
> # ëª…ë ¹ì–´ê°€ ì˜¤ë¥˜ ì—†ì´ ì‹¤í–‰ë˜ë©´ S3 ì ‘ê·¼ì´ ê°€ëŠ¥í•œ ê²ƒì…ë‹ˆë‹¤
> ```

12. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•©ë‹ˆë‹¤:

```bash
curl -I https://www.google.com
```

13. HTTP ì‘ë‹µ í—¤ë”ê°€ ì •ìƒì ìœ¼ë¡œ ìˆ˜ì‹ ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

> [!OUTPUT]
> ```
> HTTP/2 200
> content-type: text/html; charset=ISO-8859-1
> ...
> ```

> [!NOTE]
> í˜„ì¬ ìƒíƒœì—ì„œëŠ” NAT Gatewayë¥¼ í†µí•´ ì¸í„°ë„·ì— ì ‘ê·¼í•  ìˆ˜ ìˆê³ , S3ì—ë„ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ Amazon S3 ì ‘ê·¼ì´ Amazon VPC Endpointë¥¼ í†µí•˜ëŠ”ì§€ NAT Gatewayë¥¼ í†µí•˜ëŠ”ì§€ ëª…í™•í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

14. Session Manager ì°½ì€ ë‹«ì§€ ë§ê³  ê·¸ëŒ€ë¡œ ìœ ì§€í•©ë‹ˆë‹¤.

âœ… **íƒœìŠ¤í¬ 5.1 ì™„ë£Œ**: í˜„ì¬ ìƒíƒœì—ì„œ S3ì™€ ì¸í„°ë„· ì ‘ê·¼ì´ ëª¨ë‘ ê°€ëŠ¥í•¨ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

### íƒœìŠ¤í¬ 5.2: NAT Gateway ê²½ë¡œ ì œê±° í›„ Amazon VPC Endpoint ê²€ì¦

NAT Gateway ê²½ë¡œë¥¼ ì œê±°í•˜ì—¬ Amazon VPC Endpointë§Œìœ¼ë¡œ S3ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ ê²€ì¦í•©ë‹ˆë‹¤.

> [!NOTE]
> **Session Manager ì„¸ì…˜ ìœ ì§€**: SSM Interface Endpointsê°€ ë¯¸ë¦¬ ìƒì„±ë˜ì–´ ìˆìœ¼ë¯€ë¡œ NAT Gateway ê²½ë¡œë¥¼ ì œê±°í•´ë„ Session Manager ì„¸ì…˜ì€ ìœ ì§€ë©ë‹ˆë‹¤. ë§Œì•½ ì„¸ì…˜ì´ ëŠê¸´ ê²½ìš°, EC2 ì½˜ì†”ì—ì„œ ë‹¤ì‹œ Connect > Session Managerë¡œ ì ‘ì†í•©ë‹ˆë‹¤. SSM Interface Endpointsê°€ ìˆìœ¼ë¯€ë¡œ NAT Gateway ì—†ì´ë„ ìƒˆ ì„¸ì…˜ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. Amazon VPC ì½˜ì†”ë¡œ ì´ë™í•©ë‹ˆë‹¤.
2. ì™¼ìª½ ë©”ë‰´ì—ì„œ **Route tables**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
3. ê²€ìƒ‰ì°½ì— ë©”ëª¨ì¥ì— ì €ì¥í•œ `PrivateRouteTableAId`ë¥¼ ì…ë ¥í•˜ì—¬ í”„ë¼ì´ë¹— ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì°¾ìŠµë‹ˆë‹¤.
4. í•´ë‹¹ ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì„ íƒí•©ë‹ˆë‹¤.
5. í•˜ë‹¨ì˜ **Routes** íƒ­ì„ ì„ íƒí•©ë‹ˆë‹¤.
6. **Destination**ì´ `0.0.0.0/0`ì´ê³  **Target**ì´ NAT Gateway(`nat-`ë¡œ ì‹œì‘)ì¸ ë¼ìš°íŒ… ê·œì¹™ì„ ì°¾ìŠµë‹ˆë‹¤.
7. [[Edit routes]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
8. **Destination**ì´ `0.0.0.0/0`ì¸ ë¼ìš°íŒ… ê·œì¹™ ì˜¤ë¥¸ìª½ì˜ [[Remove]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.

> [!IMPORTANT]
> NAT Gateway ê²½ë¡œë¥¼ ì œê±°í•˜ë©´ ì¸í„°ë„· ì ‘ê·¼ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ Amazon VPC Endpoint ê²½ë¡œ(pl-xxx â†’ vpce-xxx)ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ë˜ë¯€ë¡œ Amazon S3 ì ‘ê·¼ì€ ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤.

9. [[Save changes]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
10. Session Manager ì°½ìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.
11. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì¸í„°ë„· ì—°ê²°ì´ ì°¨ë‹¨ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤:

```bash
curl -I --max-time 5 https://www.google.com
```

12. ì—°ê²° íƒ€ì„ì•„ì›ƒ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

> [!OUTPUT]
> ```
> curl: (28) Connection timed out after 5001 milliseconds
> ```

> [!NOTE]
> NAT Gateway ê²½ë¡œê°€ ì œê±°ë˜ì—ˆìœ¼ë¯€ë¡œ ì¸í„°ë„· ì ‘ê·¼ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ Amazon VPC Endpointë§Œìœ¼ë¡œ S3ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

13. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ Amazon S3 ë²„í‚· ëª©ë¡ì„ í™•ì¸í•©ë‹ˆë‹¤:

```bash
aws s3 ls
```

14. Amazon S3 ë²„í‚· ëª©ë¡ì´ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

> [!OUTPUT]
> ```
> # ê³„ì •ì— S3 ë²„í‚·ì´ ìˆëŠ” ê²½ìš° ë²„í‚· ëª©ë¡ì´ í‘œì‹œë©ë‹ˆë‹¤
> 2026-xx-xx xx:xx:xx your-bucket-name-1
> 2026-xx-xx xx:xx:xx your-bucket-name-2
> 
> # ë²„í‚·ì´ ì—†ëŠ” ê²½ìš° ë¹ˆ ì¶œë ¥ì´ ë‚˜íƒ€ë‚˜ë©°, ì´ëŠ” ì •ìƒì…ë‹ˆë‹¤
> # ëª…ë ¹ì–´ê°€ ì˜¤ë¥˜ ì—†ì´ ì‹¤í–‰ë˜ë©´ S3 ì ‘ê·¼ì´ ê°€ëŠ¥í•œ ê²ƒì…ë‹ˆë‹¤
> ```

> [!SUCCESS]
> **Amazon VPC Endpoint ê²€ì¦ ì„±ê³µ**: ì¸í„°ë„· ì ‘ê·¼ì´ ì°¨ë‹¨ëœ ìƒíƒœì—ì„œë„ S3ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” Amazon VPC Endpointë¥¼ í†µí•´ S3ì— ì ‘ê·¼í•˜ê³  ìˆìŒì„ ì¦ëª…í•©ë‹ˆë‹¤.

âœ… **íƒœìŠ¤í¬ 5.2 ì™„ë£Œ**: Amazon VPC Endpointë§Œìœ¼ë¡œ Amazon S3 ì ‘ê·¼ì´ ê°€ëŠ¥í•¨ì„ ê²€ì¦í–ˆìŠµë‹ˆë‹¤.

### íƒœìŠ¤í¬ 5.3: NAT Gateway ê²½ë¡œ ë³µì›

ì‹¤ìŠµ í™˜ê²½ì„ ì›ë˜ ìƒíƒœë¡œ ë³µì›í•©ë‹ˆë‹¤.

1. Amazon VPC ì½˜ì†”ë¡œ ì´ë™í•©ë‹ˆë‹¤.
2. ì™¼ìª½ ë©”ë‰´ì—ì„œ **Route tables**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
3. í”„ë¼ì´ë¹— ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì„ íƒí•©ë‹ˆë‹¤.
4. í•˜ë‹¨ì˜ **Routes** íƒ­ì„ ì„ íƒí•©ë‹ˆë‹¤.
5. [[Edit routes]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
6. [[Add route]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
7. **Destination**ì— `0.0.0.0/0`ì„ ì…ë ¥í•©ë‹ˆë‹¤.
8. **Target**ì—ì„œ `NAT Gateway`ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
9. ë“œë¡­ë‹¤ìš´ì—ì„œ ë©”ëª¨ì¥ì— ì €ì¥í•œ NatGatewayIdë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

> [!NOTE]
> NAT Gateway IDëŠ” `nat-`ë¡œ ì‹œì‘í•©ë‹ˆë‹¤. ë©”ëª¨ì¥ì— ì €ì¥í•œ ê°’ì„ ì°¸ê³ í•˜ì—¬ ì„ íƒí•©ë‹ˆë‹¤.

10. [[Save changes]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
11. Session Manager ì°½ìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.
12. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì¸í„°ë„· ì—°ê²°ì´ ë³µì›ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤:

```bash
curl -I https://www.google.com
```

13. HTTP ì‘ë‹µ í—¤ë”ê°€ ì •ìƒì ìœ¼ë¡œ ìˆ˜ì‹ ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

> [!OUTPUT]
> ```
> HTTP/2 200
> content-type: text/html; charset=ISO-8859-1
> ...
> ```

14. Session Manager ì°½ì„ ë‹«ìŠµë‹ˆë‹¤.

âœ… **íƒœìŠ¤í¬ 5.3 ì™„ë£Œ**: ì‹¤ìŠµ í™˜ê²½ì´ ì›ë˜ ìƒíƒœë¡œ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤.

âœ… **íƒœìŠ¤í¬ 5 ì™„ë£Œ**: Amazon VPC Endpointì˜ ë™ì‘ì„ ì‹¤ì œë¡œ ê²€ì¦í•˜ê³  ì´í•´í–ˆìŠµë‹ˆë‹¤.

## ë§ˆë¬´ë¦¬

ë‹¤ìŒì„ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤:

- CloudFormationìœ¼ë¡œ Amazon VPC í™˜ê²½ì„ ìë™ìœ¼ë¡œ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤
- AWS Systems Managerìš© Interface Endpoint 3ê°œë¥¼ ìƒì„±í•˜ì—¬ Session Manager ì ‘ì†ì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤
- Amazon S3 Gateway Endpointë¥¼ ìƒì„±í•˜ì—¬ í”„ë¼ì´ë¹— ì„œë¸Œë„·ì—ì„œ S3ì— ì•ˆì „í•˜ê²Œ ì ‘ê·¼í–ˆìŠµë‹ˆë‹¤
- Interface Endpointì™€ Gateway Endpointì˜ ì°¨ì´ì ì„ ì´í•´í–ˆìŠµë‹ˆë‹¤
- ë¼ìš°íŒ… í…Œì´ë¸”ì„ í†µí•œ íŠ¸ë˜í”½ ì œì–´ ë°©ì‹ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤
- Amazon VPC Endpointì˜ ë™ì‘ ì›ë¦¬ë¥¼ ì‹¤ì œë¡œ ê²€ì¦í–ˆìŠµë‹ˆë‹¤

## ë¦¬ì†ŒìŠ¤ ì •ë¦¬

> [!WARNING]
> ë‹¤ìŒ ë‹¨ê³„ë¥¼ **ë°˜ë“œì‹œ ìˆ˜í–‰**í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë¹„ìš©ì„ ë°©ì§€í•˜ì„¸ìš”.

### ë‹¨ê³„ 1: Tag Editorë¡œ ë¦¬ì†ŒìŠ¤ í™•ì¸ (ê¶Œì¥)

1. AWS Management Consoleì— ë¡œê·¸ì¸í•œ í›„ ìƒë‹¨ ê²€ìƒ‰ì°½ì—ì„œ `Resource Groups & Tag Editor`ë¥¼ ê²€ìƒ‰í•˜ê³  ì„ íƒí•©ë‹ˆë‹¤.
2. ì™¼ìª½ ë©”ë‰´ì—ì„œ **Tag Editor**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
3. **Regions**ì—ì„œ `ap-northeast-2`ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
4. **Resource types**ì—ì„œ `All supported resource types`ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
5. **Tags** ì„¹ì…˜ì—ì„œ ë‹¤ìŒì„ ì…ë ¥í•©ë‹ˆë‹¤:
   - **Tag key**: `Week`
   - **Tag value**: `3-1`
6. [[Search resources]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
7. ì´ ì‹¤ìŠµì—ì„œ ìƒì„±í•œ Amazon VPC Endpointê°€ í‘œì‹œë©ë‹ˆë‹¤.

> [!NOTE]
> Tag EditorëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ëŠ” ìš©ë„ë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì‹¤ì œ ì‚­ì œëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤.

### ë‹¨ê³„ 2: ë¦¬ì†ŒìŠ¤ ì‚­ì œ

#### Amazon VPC Endpoint ì‚­ì œ

1. Amazon VPC ì½˜ì†”ë¡œ ì´ë™í•©ë‹ˆë‹¤.
2. ì™¼ìª½ ë©”ë‰´ì—ì„œ **Endpoints**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
3. ë‹¤ìŒ 4ê°œì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ëª¨ë‘ ì„ íƒí•©ë‹ˆë‹¤:
   - `week3-1-ssm-endpoint`
   - `week3-1-ssmmessages-endpoint`
   - `week3-1-ec2messages-endpoint`
   - `week3-1-s3-endpoint`

> [!NOTE]
> 4ê°œì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ëª¨ë‘ ì„ íƒí•˜ë ¤ë©´ ê° ì—”ë“œí¬ì¸íŠ¸ì˜ ì²´í¬ë°•ìŠ¤ë¥¼ í´ë¦­í•©ë‹ˆë‹¤. ëª¨ë‘ ì„ íƒë˜ë©´ ìƒë‹¨ì˜ **Actions** ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤.

4. **Actions** > `Delete Amazon VPC endpoints`ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
5. í™•ì¸ ì°½ì—ì„œ `delete`ë¥¼ ì…ë ¥í•˜ê³  [[Delete]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.

> [!NOTE]
> Amazon VPC Endpoint ì‚­ì œëŠ” ì¦‰ì‹œ ì™„ë£Œë©ë‹ˆë‹¤. Interface Endpoint 3ê°œì™€ Gateway Endpoint 1ê°œê°€ ëª¨ë‘ ì‚­ì œë©ë‹ˆë‹¤.

#### AWS CloudFormation ìŠ¤íƒ ì‚­ì œ

1. AWS Management Consoleì— ë¡œê·¸ì¸í•œ í›„ ìƒë‹¨ ê²€ìƒ‰ì°½ì—ì„œ `AWS CloudFormation`ì„ ê²€ìƒ‰í•˜ê³  ì„ íƒí•©ë‹ˆë‹¤.
2. ìŠ¤íƒ ëª©ë¡ì—ì„œ `week3-1-vpc-stack` ìŠ¤íƒì„ ê²€ìƒ‰í•©ë‹ˆë‹¤.
3. `week3-1-vpc-stack` ìŠ¤íƒì˜ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

> [!NOTE]
> ìŠ¤íƒì´ ì„ íƒë˜ë©´ ì²´í¬ë°•ìŠ¤ì— ì²´í¬ í‘œì‹œê°€ ë‚˜íƒ€ë‚˜ê³ , ìƒë‹¨ì˜ [[Delete]] ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤.

4. [[Delete]] ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
5. í™•ì¸ ì°½ì—ì„œ [[Delete]] ë²„íŠ¼ì„ ë‹¤ì‹œ í´ë¦­í•˜ì—¬ ì‚­ì œë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

> [!NOTE]
> í™•ì¸ í›„ ìŠ¤íƒ ëª©ë¡ í˜ì´ì§€ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.

6. `week3-1-vpc-stack` ìŠ¤íƒì˜ **Status** ì—´ì„ í™•ì¸í•©ë‹ˆë‹¤.

> [!NOTE]
> ìŠ¤íƒ ì‚­ì œê°€ ì‹œì‘ë˜ë©´ **Status**ê°€ "DELETE_IN_PROGRESS"ë¡œ í‘œì‹œë©ë‹ˆë‹¤. CloudFormationì´ ìƒì„±í•œ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ì—­ìˆœìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.

7. ìŠ¤íƒì„ í´ë¦­í•˜ì—¬ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
8. **Events** íƒ­ì„ ì„ íƒí•©ë‹ˆë‹¤.

> [!NOTE]
> **Events** íƒ­ì—ëŠ” ë¦¬ì†ŒìŠ¤ ì‚­ì œ ê³¼ì •ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤. Amazon EC2 ì¸ìŠ¤í„´ìŠ¤, NAT Gateway, Amazon VPC Endpoint, ì„œë¸Œë„·, Amazon VPC ë“±ì´ ìˆœì°¨ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤. ì‚­ì œì— 5-7ë¶„ì´ ì†Œìš”ë©ë‹ˆë‹¤.

9. ìŠ¤íƒ ì‚­ì œê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.

> [!NOTE]
> ìŠ¤íƒì´ ì™„ì „íˆ ì‚­ì œë˜ë©´ ìŠ¤íƒ ëª©ë¡ì—ì„œ ì‚¬ë¼ì§‘ë‹ˆë‹¤. ë§Œì•½ "DELETE_FAILED"ê°€ í‘œì‹œë˜ë©´ **Events** íƒ­ì—ì„œ ì˜¤ë¥˜ ì›ì¸ì„ í™•ì¸í•˜ê³ , ìˆ˜ë™ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•œ í›„ ìŠ¤íƒ ì‚­ì œë¥¼ ë‹¤ì‹œ ì‹œë„í•©ë‹ˆë‹¤.

10. Amazon VPC ì½˜ì†”ë¡œ ì´ë™í•˜ì—¬ Amazon VPC Endpointê°€ ì‚­ì œë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
11. ì™¼ìª½ ë©”ë‰´ì—ì„œ **Endpoints**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
12. ë‹¤ìŒ 4ê°œì˜ ì—”ë“œí¬ì¸íŠ¸ê°€ ëª©ë¡ì— í‘œì‹œë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤:
    - `week3-1-ssm-endpoint`
    - `week3-1-ssmmessages-endpoint`
    - `week3-1-ec2messages-endpoint`
    - `week3-1-s3-endpoint`

> [!NOTE]
> 4ê°œì˜ Amazon VPC Endpointê°€ ëª¨ë‘ ëª©ë¡ì— ì—†ìœ¼ë©´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œëœ ê²ƒì…ë‹ˆë‹¤. AWS CloudFormation ìŠ¤íƒì„ ì‚­ì œí•˜ë©´ NAT Gateway, Elastic IP, Amazon EC2 ì¸ìŠ¤í„´ìŠ¤, Amazon VPC ë“± ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ìë™ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤.

âœ… **ì‹¤ìŠµ ì¢…ë£Œ**: ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.

## ì¶”ê°€ í•™ìŠµ ë¦¬ì†ŒìŠ¤

- [Amazon VPC Endpoints ê°œìš”](https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints.html)
- [Gateway Endpoint vs Interface Endpoint](https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-gateway.html)
- [Amazon VPC Endpoint ì •ì±…](https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-access.html)

## ğŸ“š ì°¸ê³ : Amazon VPC Endpoint í•µì‹¬ ê°œë…

### Gateway Endpoint vs Interface Endpoint

| êµ¬ë¶„ | Gateway Endpoint | Interface Endpoint |
|:-----|:----------------|:------------------|
| **ì§€ì› ì„œë¹„ìŠ¤** | Amazon S3, Amazon DynamoDB | ëŒ€ë¶€ë¶„ì˜ AWS ì„œë¹„ìŠ¤ |
| **êµ¬í˜„ ë°©ì‹** | ë¼ìš°íŒ… í…Œì´ë¸” | ENI (Elastic Network Interface) |
| **ë¹„ìš©** | ë¬´ë£Œ | ì‹œê°„ë‹¹ ìš”ê¸ˆ + ë°ì´í„° ì „ì†¡ ìš”ê¸ˆ |
| **ê°€ìš© ì˜ì—­** | ë¦¬ì „ ì „ì²´ | AZë³„ë¡œ ìƒì„± í•„ìš” |
| **ë³´ì•ˆ ê·¸ë£¹** | ì§€ì› ì•ˆ í•¨ | ì§€ì› |

### Amazon VPC Endpoint ì‚¬ìš© ì´ì 

**ë³´ì•ˆ ê°•í™”**
- ì¸í„°ë„·ì„ ê±°ì¹˜ì§€ ì•Šê³  AWS ì„œë¹„ìŠ¤ì— ì ‘ê·¼
- í¼ë¸”ë¦­ IP ì£¼ì†Œ ë¶ˆí•„ìš”
- ë°ì´í„°ê°€ AWS ë„¤íŠ¸ì›Œí¬ ë‚´ë¶€ì—ì„œë§Œ ì´ë™

**ì„±ëŠ¥ í–¥ìƒ**
- ë‚®ì€ ì§€ì—° ì‹œê°„
- ë†’ì€ ì²˜ë¦¬ëŸ‰
- NAT Gateway ë¶€í•˜ ê°ì†Œ

**ë¹„ìš© ì ˆê°**
- NAT Gateway ë°ì´í„° ì „ì†¡ ë¹„ìš© ì ˆê°
- Gateway EndpointëŠ” ë¬´ë£Œ

### Amazon VPC Endpoint ì •ì±…

Amazon VPC Endpoint ì •ì±…ì„ ì‚¬ìš©í•˜ì—¬ ì ‘ê·¼ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```json
{
  "Statement": [{
    "Effect": "Allow",
    "Principal": "*",
    "Action": [
      "s3:GetObject",
      "s3:PutObject"
    ],
    "Resource": "arn:aws:s3:::my-bucket/*"
  }]
}
```

ğŸ’¡ **ê¶Œì¥**: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” Amazon VPC Endpoint ì •ì±…ìœ¼ë¡œ íŠ¹ì • ë²„í‚·ë§Œ ì ‘ê·¼í•˜ë„ë¡ ì œí•œí•©ë‹ˆë‹¤.
